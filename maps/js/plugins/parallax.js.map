{"version":3,"sources":["js/plugins/parallax.js"],"names":["Parallax","options","speed","zIndex","fade","slidein","a","mirrors","slider","length","l","parseFloat","style","opacity","setTimeout","mirror","remove","shift","start","document","createElement","classList","add","visibility","position","top","left","overflow","window","appendChild","src","alt","o","push","addEventListener","update","init","wH","documentElement","clientHeight","wW","clientWidth","pageYOffset","compatMode","scrollTop","body","t","r","sT","Math","max","sL","scrollLeft","overScroll","min","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","refreshItem","aspectRatio","naturalWidth","naturalHeight","boxWidth","boxHeight","boxOffsetTop","boxOffsetLeft","boxOffsetBottom","i","e","s","imageWidth","imageHeight","offsetBaseTop","offsetLeft","renderItem","mirrorTop","mirrorLeft","offsetTop","transform","height","width","maxWidth","forEach"],"mappings":"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","file":"../../../js/plugins/parallax.js","sourcesContent":["let Parallax = {};\nParallax.options = {};\nParallax.options.speed = 0.25;\nParallax.options.zIndex = -100;\nParallax.options.fade = 1500;\nParallax.slidein = () => {\n  let slider = Parallax.mirrors[0].slider;\n  if (Parallax.mirrors.length >= 2) {\n    slider = Parallax.mirrors[1].slider;\n  }\n  var opac = parseFloat(slider.style.opacity);\n  if (opac !== 1) {\n    if (Parallax.mirrors.length >= 2) {\n      opac = opac + 0.1;\n      slider.style.opacity = opac;\n      setTimeout(Parallax.slidein, Parallax.options.fade / 10);\n    }else{\n      slider.style.opacity = 1;\n    }\n  } else {\n    if (Parallax.mirrors.length >= 2) {\n      Parallax.mirrors[0].mirror.remove();\n      Parallax.mirrors.shift();\n    }\n  }\n};\nParallax.start = () => {\n  let mirror = document.createElement(\"div\");\n  mirror.classList.add(\"parallax-mirror\");\n  mirror.style.visibility = \"hidden\";\n  mirror.style.zIndex = Parallax.options.zIndex;\n  mirror.style.position = \"fixed\";\n  mirror.style.top = 0;\n  mirror.style.left = 0;\n  mirror.style.overflow = \"hidden\";\n  Parallax.window.appendChild(mirror);\n  let slider = document.createElement(\"img\");\n  slider.src = Parallax.options.src;\n  slider.alt = \"parallax\";\n  slider.classList.add(\"parallax-slider\");\n  slider.style.opacity = 0;\n  mirror.appendChild(slider);\n  if (!Parallax.mirrors) {\n    Parallax.mirrors = [];\n  }\n  let mirrorItem = {};\n  mirrorItem.mirror = mirror;\n  mirrorItem.slider = slider;\n  Parallax.mirrors.push(mirrorItem);\n  Parallax.slidein();\n  slider.addEventListener(\n    \"load\",\n    function () {\n      Parallax.update();\n    },\n    false\n  );\n};\nParallax.init = () => {\n  function loadDimensions() {\n    Parallax.wH = document.documentElement.clientHeight;\n    Parallax.wW = document.documentElement.clientWidth;\n  }\n  function getScrollTop() {\n    var scrollPos;\n    if (window.pageYOffset) {\n      scrollPos = window.pageYOffset;\n    } else if (document.compatMode && document.compatMode != \"BackCompat\") {\n      scrollPos = document.documentElement.scrollTop;\n    } else if (document.body) {\n      scrollPos = document.body.scrollTop;\n    }\n    return scrollPos;\n  }\n  function loadScrollPosition() {\n    const winScrollTop = getScrollTop();\n    Parallax.sT = Math.max(0, winScrollTop);\n    Parallax.sL = Math.max(0, document.body.scrollLeft);\n    Parallax.overScroll = Math.min(winScrollTop, 0);\n  }\n  window.addEventListener(\n    \"resize\",\n    function () {\n      loadDimensions();\n      Parallax.update();\n    },\n    false\n  );\n  loadDimensions();\n  let lastPosition = -1;\n  (function loop() {\n    const yoffset = getScrollTop();\n    if (lastPosition !== yoffset) {\n      lastPosition = yoffset;\n      loadScrollPosition();\n      Parallax.update();\n    }\n    window.requestAnimationFrame =\n      window.requestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.webkitRequestAnimationFrame;\n    window.requestAnimationFrame(loop);\n  })();\n};\n\nParallax.refreshItem = (slider) => {\n  Parallax.options.aspectRatio =\n    slider.naturalWidth / (slider.naturalHeight || 1);\n  const aspect = Parallax.options.aspectRatio || 1;\n  Parallax.options.boxWidth = Parallax.window.clientWidth;\n  Parallax.options.boxHeight = Parallax.window.clientHeight;\n  Parallax.options.boxOffsetTop = Parallax.window.scrollTop;\n  Parallax.options.boxOffsetLeft = Parallax.window.scrollLeft;\n  Parallax.options.boxOffsetBottom =\n    Parallax.options.boxOffsetTop + Parallax.options.boxHeight;\n  const winHeight = Parallax.wH;\n  const maxOffset = Parallax.options.boxOffsetTop;\n  const minOffset = Math.max(\n    Parallax.options.boxOffsetTop + Parallax.options.boxHeight - winHeight,\n    0\n  );\n  const imageHeightMin =\n    (Parallax.options.boxHeight +\n      (maxOffset - minOffset) * (1 - Parallax.options.speed)) |\n    0;\n  const imageOffsetMin =\n    ((Parallax.options.boxOffsetTop - maxOffset) *\n      (1 - Parallax.options.speed)) |\n    0;\n  let margin;\n  if (Parallax.options.boxWidth < imageHeightMin * aspect) {\n    Parallax.options.imageWidth = (imageHeightMin * aspect) | 0;\n    Parallax.options.imageHeight = imageHeightMin;\n    Parallax.options.offsetBaseTop = imageOffsetMin;\n    margin = Parallax.options.imageWidth - Parallax.options.boxWidth;\n    Parallax.options.offsetLeft = (-margin / 2) | 0;\n  } else {\n    Parallax.options.imageWidth = Parallax.options.boxWidth;\n    Parallax.options.imageHeight = (Parallax.options.boxWidth / aspect) | 0;\n    Parallax.options.offsetLeft = 0;\n    margin = Parallax.options.imageHeight - imageHeightMin;\n    Parallax.options.offsetBaseTop = (imageOffsetMin - margin / 2) | 0;\n  }\n};\nParallax.renderItem = (mirror, slider) => {\n  const scrollTop = Parallax.sT;\n  const scrollLeft = Parallax.sL;\n  const scrollBottom = scrollTop + Parallax.wH;\n  if (\n    Parallax.options.boxOffsetBottom > scrollTop &&\n    Parallax.options.boxOffsetTop <= scrollBottom\n  ) {\n    Parallax.options.visibility = \"visible\";\n    Parallax.options.mirrorTop = Parallax.options.boxOffsetTop - scrollTop;\n    Parallax.options.mirrorLeft = Parallax.options.boxOffsetLeft - scrollLeft;\n    Parallax.options.offsetTop =\n      Parallax.options.offsetBaseTop -\n      Parallax.options.mirrorTop * (1 - Parallax.options.speed);\n  } else {\n    Parallax.options.visibility = \"hidden\";\n  }\n  mirror.style.transform =\n    \"translate3d(\" +\n    Parallax.options.mirrorLeft +\n    \"px, \" +\n    Parallax.options.mirrorTop +\n    \"px, 0px)\";\n  mirror.style.visibility = Parallax.options.visibility;\n  mirror.style.height = Parallax.options.boxHeight + \"px\";\n  mirror.style.width = Parallax.options.boxWidth + \"px\";\n\n  slider.style.transform =\n    \"translate3d(\" +\n    Parallax.options.offsetLeft +\n    \"px, \" +\n    Parallax.options.offsetTop +\n    \"px, 0px)\";\n  slider.style.position = \"absolute\";\n  slider.style.height = Parallax.options.imageHeight + \"px\";\n  slider.style.width = Parallax.options.imageWidth + \"px\";\n  slider.style.maxWidth = \"none\";\n};\nParallax.update = () => {\n  if (!Parallax.mirrors) {\n    return\n  }\n  Parallax.mirrors.forEach((e) => {\n    Parallax.refreshItem(e.slider);\n    Parallax.renderItem(e.mirror, e.slider);\n  });\n};\n"]}